<!-- File Size: 81B Speed: 2.82s -->
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, 
              shrink-to-fit=no">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Show Statistics Page</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.6/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"></script>
        <script src="classes.js"></script>
    </head>
    <body>
        <h1 class="text-center">Team 1</h1>
        
        <ul class="nav nav-pills nav-justified border border-dark">  
            <li class="nav-item">
                <a class="nav-link text-info" href="teamroster.html">Roster</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-info" href="teamschedule.html">Schedule</a>
            </li>
            <li class="nav-item">
                <a class="nav-link active bg-info" href="showStatsBS.html">Stats</a>
            </li>
        </ul>
        
        <template id="TeamStats">
        <table class="table table-light">
            <thead class="bg-info">
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Goals</th>
                    <th scope="col">Shots on Goal</th>
                    <th scope="col">Penalty Kicks</th>
                    <th scope="col">Games Played</th>
                    <th scope="col">Fouls</th>
                </tr>
            </thead>
            <tbody id="PlayerStats">
  
                <!-- <tr>
                    <th scope="row">Mark</th>
                    <td>3</td>
                    <td>12</td>
                    <td>1</td>
                    <td>3</td>
                    <td>1</td>
                </tr>
                <tr>
                    <th scope="row">Jake</th>
                    <td>4</td>
                    <td>9</td>
                    <td>0</td>
                    <td>2</td>
                    <td>0</td>
                </tr>
                <tr>
                    <th scope="row">Sam</th>
                    <td>0</td>
                    <td>3</td>
                    <td>1</td>
                    <td>3</td>
                    <td>3</td>
                </tr>
                <tr>
                    <th scope="row">Jimbo</th>
                    <td>1</td>
                    <td>6</td>
                    <td>1</td>
                    <td>3</td>
                    <td>2</td>
                </tr> -->
            </tbody>
        </table>
        </template>
        
        <button class="span4 proj-div" data-toggle="modal" data-target="#playerModal">edit</button>
        
        <!--<script>            
                $('#pls').click(function(){
                    $('#playerModal').modal('show');
                    return false;
                })
        </script>-->
        
        <!-- Modal -->
        <div id="playerModal" class="modal fade">
            <div class="modal-dialog">
            <div class="modal-content">
            <div class="modal-header">
                <h3 id="playerModalLabel">Edit Player</h3>
            </div>
            <div class="modal-body">
                <h6> Only enter values for fields you wish to update.</h6>
                <form class="form-horizontal" role="form">
                    <div class="form-group">
                        <label for="goals">Goals</label>
                        <input type="number" class="form-control" id="goals" placeholder="Goals">
                    </div>
                    
                    <div class="form-group">
                        <label for="SoG">Shots on Goal</label>
                        <input type="number" class="form-control" id="SoG" placeholder="SoG">
                    </div>
                    
                    <div class="form-group">
                        <label for="PKs">Penalty Kicks</label>
                        <input type="number" class="form-control" id="PKs" placeholder="PKs">
                    </div>
                    
                    <div class="form-group">
                        <label for="GP">Games Played</label>
                        <input type="number" class="form-control" id="GP" placeholder="GP">
                    </div>
                    
                    <div class="form-group">
                        <label for="fouls">Fouls Committed</label>
                        <input type="number" class="form-control" id="fouls" placeholder="fouls">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                <button class="btn btn-primary">Save changes</button>
            </div>
            </div>
            </div>
        </div>
        
        <script type="text/javascript">           
            editStats() {
                $('#playerModal').modal('show');
            }
            
            myStorage = window.localStorage;
            let playersArray = JSON.parse(myStorage.getItem("TeamRoster"));
            
            window.addEventListener('StatsLoaded', function () {
            // get the template view
            let t = document.querySelector('#TeamStats');


            // quick and dirty with map and arrow but more readable if a loop
            //let markup = `<ul>${team.map(player => `<li>${player.name} # ${player.number}</li>`).join('')}</ul>`;
            var markup = '';
            for (i = 0; i < playersArray.length; i++) {
                markup += '<tr id="${playersArray[i].name}"> <th scope="row">${playersArray[i].name}</th>
                    <td>${playersArray[i].goals}</td>
                    <td>${playersArray[i].SoG}</td>
                    <td>${playersArray[i].PKs}</td>
                    <td>${playersArray[i].GP}</td>
                    <td>${playersArray[i].fouls}</td> 
                    <td> <button data-toggle="modal" data-target="#playerModal">edit</button> </td>
                    </tr>'; 
            }
            
            
            // Populate the template.
            t.content.querySelector('#PlayerStats').innerHTML = markup;

            // clone it make sure it is deep - the true part
            let clonedTemplate = document.importNode(t.content, true);
        
            // add it to the view
            document.querySelector('#view').appendChild(clonedTemplate);

            });
            
        </script>
        
        <p><a href="https://validator.w3.org/nu/?doc=https%3A%2F%2Fteamsnipelk.firebaseapp.com%2FshowStatsBS.html">W3 Validator</a></p>
        
    </body>  
</html>